(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-51bfc424"],{"2d22":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"details"}},[i("div",{staticClass:"page-header"},[i("div",{staticClass:"title"},[i("p",[t._v(t._s(t.productDetails.productName))]),i("div",{staticClass:"list"},[i("ul",[i("li",[i("router-link",{attrs:{to:""}},[t._v("概述")])],1),i("li",[i("router-link",{attrs:{to:""}},[t._v("参数")])],1),i("li",[i("router-link",{attrs:{to:""}},[t._v("用户评价")])],1)])])])]),i("div",{staticClass:"main"},[i("div",{staticClass:"block"},[t.productPicture.length>1?i("el-carousel",{attrs:{height:"560px"}},t._l(t.productPicture,(function(e){return i("el-carousel-item",{key:e.id},[i("img",{staticStyle:{height:"560px"},attrs:{src:t.$target+e.productPicture,alt:e.intro}})])})),1):t._e(),1==t.productPicture.length?i("div",[i("img",{staticStyle:{height:"560px"},attrs:{src:t.$target+t.productPicture[0].productPicture,alt:t.productPicture[0].intro}})]):t._e()],1),i("div",{staticClass:"content"},[i("h1",{staticClass:"name"},[t._v(t._s(t.productDetails.productName))]),i("p",{staticClass:"store"},[t._v("开始时间: "),i("span",[t._v(t._s(t._f("dateFormat")(t.productDetails.startTime)))])]),i("p",{staticClass:"store"},[t._v("结束时间: "),i("span",[t._v(t._s(t._f("dateFormat")(t.productDetails.endTime)))])]),i("div",{staticClass:"price"},[i("span",[t._v(t._s(t.productDetails.seckillPrice)+"元")]),i("span",{directives:[{name:"show",rawName:"v-show",value:t.productDetails.productPrice!=t.productDetails.seckillPrice,expression:"productDetails.productPrice != productDetails.seckillPrice"}],staticClass:"del"},[t._v(t._s(t.productDetails.productPrice)+"元")])]),i("div",{staticClass:"pro-list"},[i("span",{staticClass:"pro-name"},[t._v(t._s(t.productDetails.productName))]),i("span",{staticClass:"pro-price"},[i("span",[t._v(t._s(t.productDetails.seckillPrice)+"元")]),i("span",{directives:[{name:"show",rawName:"v-show",value:t.productDetails.productPrice!=t.productDetails.seckillPrice,expression:"productDetails.productPrice != productDetails.seckillPrice"}],staticClass:"pro-del"},[t._v(t._s(t.productDetails.productPrice)+"元")])]),i("p",{staticClass:"price-sum"},[t._v("秒杀价 : "+t._s(t.productDetails.seckillPrice)+"元")]),i("p",{staticClass:"price-sum"},[t._v("倒计时 : "+t._s(t.testTime)+"秒")])]),i("div",{staticClass:"button"},[i("el-button",{staticClass:"shop-cart",attrs:{disabled:t.dis},on:{click:t.addSeckill}},[t._v("抢购")]),i("el-button",{staticClass:"like",on:{click:t.addCollect}},[t._v("喜欢")])],1),t._m(0)])])])},c=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"pro-policy"},[i("ul",[i("li",[i("i",{staticClass:"el-icon-circle-check"}),t._v(" 小米自营 ")]),i("li",[i("i",{staticClass:"el-icon-circle-check"}),t._v(" 小米发货 ")]),i("li",[i("i",{staticClass:"el-icon-circle-check"}),t._v(" 7天无理由退货 ")]),i("li",[i("i",{staticClass:"el-icon-circle-check"}),t._v(" 7天价格保护 ")])])])}],a=(i("3a20"),i("2549")),r=i("8876"),o={data:function(){return{dis:!0,productID:"",seckillID:"",productDetails:"",productPicture:"",seckillState:0,remainSeconds:0,testTime:0}},activated:function(){void 0!=this.$route.query.productID&&(this.productID=this.$route.query.productID),void 0!=this.$route.query.seckillID&&(this.seckillID=this.$route.query.seckillID)},watch:{productID:function(t){this.getDetailsPicture(t)},seckillID:function(t){this.getDetails(t)},remainSeconds:function(){this.countDown()}},methods:Object(a["a"])({},Object(r["b"])(),{getDetails:function(t){var e=this;this.$axios.get("/api/seckill/product/"+t).then((function(t){e.productDetails=t.data.data,e.productDetails.startTime>(new Date).getTime()?(e.remainSeconds=Math.floor(e.productDetails.startTime/1e3-(new Date).getTime()/1e3),e.testTime=e.remainSeconds,e.seckillState=0):(new Date).getTime()>e.productDetails.endTime?(e.seckillState=2,e.remainSeconds=0,e.testTime=e.remainSeconds):(e.seckillState=1,e.remainSeconds=0,e.testTime=e.remainSeconds,e.dis=!1)})).catch((function(t){return Promise.reject(t)}))},getDetailsPicture:function(t){var e=this;this.$axios.get("/api/productPicture/product/"+t).then((function(t){e.productPicture=t.data.data})).catch((function(t){return Promise.reject(t)}))},countDown:function(){var t=this;t.testTime>0?(t.testTime=t.testTime-1,setTimeout((function(){t.countDown(t.testTime)}),1e3)):t.testTime<=0&&(this.seckillState=1,this.dis=!1)},addSeckill:function(){var t=this;this.$store.getters.getUser?this.$axios.post("/api/seckill/product/seckill/"+this.seckillID).then((function(e){switch(e.data.code){case"001":t.notifySucceed(e.data.msg);break;case"2":t.dis=!0,t.notifySucceed(e.data.msg);break;case"3":t.dis=!0,t.notifyError(e.data.msg);break;default:t.notifyError(e.data.msg)}})).catch((function(t){return Promise.reject(t)})):this.$store.dispatch("setShowLogin",!0)},addCollect:function(){var t=this;this.$store.getters.getUser?this.$axios.post("/api/collect/user/"+this.productID+"/"+this.$store.getters.getUser.userId).then((function(e){"001"==e.data.code?t.notifySucceed(e.data.msg):t.notifyError(e.data.msg)})).catch((function(t){return Promise.reject(t)})):this.$store.dispatch("setShowLogin",!0)}})},l=o,n=(i("a10f"),i("e90a")),u=Object(n["a"])(l,s,c,!1,null,null,null);e["default"]=u.exports},"7c0a":function(t,e,i){},a10f:function(t,e,i){"use strict";var s=i("7c0a"),c=i.n(s);c.a}}]);
//# sourceMappingURL=chunk-51bfc424.04cce657.js.map